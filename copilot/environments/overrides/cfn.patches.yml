# This file was generated by copilot:
#
#   $ copilot env -n test override
#
# This is the ymlpatch version

# View current CloudFormation template
#
#   $ copilot env -n test package

# Delete the task role resource
# - op: remove
#   path: /Resources/TaskRole

# Add a service connect alias
# - op: add
#   path: /Resources/Service/Properties/ServiceConnectConfiguration/Services/0/ClientAliases/-
#   value:
#     Port: !Ref TargetPort
#     DnsName: yamlpatchiscool

# Replace the task role in the task definition
# - op: replace
#   path: /Resources/TaskDefinition/Properties/TaskRoleArn
#   value: arn:aws:iam::123456789012:role/MyTaskRole

- op: replace
  path: /Resources/EnvironmentHTTPSecurityGroupIngressFromPublicALB/Properties/IpProtocol
  value: tcp
- op: replace
  path: /Resources/EnvironmentHTTPSecurityGroupIngressFromPublicALB/Properties/Description
  value: HTTP ingress from the public ALB on port 4000
- op: add
  path: /Resources/EnvironmentHTTPSecurityGroupIngressFromPublicALB/Properties/FromPort
  value: 4000
- op: add
  path: /Resources/EnvironmentHTTPSecurityGroupIngressFromPublicALB/Properties/ToPort
  value: 4000
- op: remove
  path: /Resources/EnvironmentHTTPSSecurityGroupIngressFromPublicALB
- op: remove
  path: /Resources/EnvironmentSecurityGroupIngressFromSelf
- op: add
  path: /Resources/PublicLoadBalancer/Properties/Name
  value: !Sub ${AppName}-${EnvironmentName}-pub-lb
