name: mavis-server
help: Mavis server commands
version: 0.0.0

# environment_variables:
# - name: api_key
#   help: Set your API key

commands:
  - name: shell
    alias: sh
    help: Open shell on server

    args:
      - &environment-arg
        name: environment
        required: true
        help: Specify the environment (cluster will be mavis-ENV)

    flags:
      - &service-flag
        long: --service
        short: -s
        help: "Specify the service name. Ignored if using --task-id or --task-ip"
      - &task-id-flag
        long: --task-id
        short: -t
        arg: task_id
        help: "Specify the task ID directly"
        conflicts: [--task-ip]
      - &task-ip-flag
        long: --task-ip
        short: -T
        arg: task_ip
        help: "Specify the task by its IP address."
        conflicts: [--task-id]
      - &exit-without-login-flag
        long: --exit-without-login
        short: -x
        help: "Do not try to login if user is not already logged in"

    examples:
      - mavis-server shell test

  - name: list-tasks
    help: List running tasks for an env
    args:
      - *environment-arg

  - name: send-file
    help: Send file to a server

    args:
      - *environment-arg
      - name: local-file
        required: true
        help: "Path to local source file to copy"
      - name: remote-file
        required: true
        help: "Path to remote destination file"

    flags:
      - *service-flag
      - *task-id-flag
      - *task-ip-flag
      - *exit-without-login-flag

    # examples:
    #   - mavis-server send-file
