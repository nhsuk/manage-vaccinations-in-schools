<% content_for :before_main do %>
  <%= render AppBreadcrumbComponent.new(items: [
                                          { text: t("dashboard.index.title"), href: dashboard_path },
                                          { text: t("imports.index.title"), href: imports_path },
                                        ]) %>
<% end %>

<%= h1 "Further review and approve upload (#{import.created_at.to_fs(:long)})" %>

<%= render AppImportSummaryComponent.new(import:) %>

<% if @patients.present? %>
  <%= render AppSecondaryNavigationComponent.new do |nav| %>
    <%= nav.with_item(
          href: polymorphic_path([:re_review, import]),
          text: "Needs further review",
          selected: request.path.ends_with?("/re_review"),
        ) %>
      <%= nav.with_item(
            href: polymorphic_path([:imported_records, import]),
            text: "Imported",
            selected: request.path.ends_with?("/imported_records"),
          ) %>
  <% end %>
<% end %>

<% if @patients.present? %>
  <%= render AppPatientTableComponent.new(@patients, current_user:, count: @pagy.count) %>
<% else %>
  <p>No patients have been imported.</p>
<% end %>