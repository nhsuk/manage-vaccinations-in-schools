<% content_for :before_main do %>
  <%= render AppBacklinkComponent.new(
        href: @programme.active ? programme_edit_path(@programme, :confirm) : programmes_path,
        name: @programme.active ? "edit programme" : "vaccination programmes",
      ) %>
<% end %>

<%= form_with model: @programme, url: wizard_path, method: :put do |f| %>
  <%= f.govuk_error_summary %>

  <%= h1 "Programme details" %>

  <%= f.govuk_text_field :name, label: { size: "m" } %>

  <%= f.govuk_collection_radio_buttons :type, Programme.types.keys.map { [_1, Programme.human_enum_name(:type, _1)] }, :first, :second, legend: { text: "Programme type" } %>

  <%= f.govuk_radio_buttons_fieldset :academic_year, legend: { text: "Academic year" } do %>
    <% today_year = Time.zone.today.year %>
    <% [today_year - 1, today_year, today_year + 1].each_with_index do |academic_year, index| %>
      <%= f.govuk_radio_button(
            :academic_year, academic_year.to_s,
            label: { text: programme_academic_year(academic_year) },
            link_errors: index.zero?,
          ) %>
    <% end %>
  <% end %>

  <%= f.govuk_submit %>
<% end %>
