<% content_for :before_main do %>
  <%= render AppBacklinkComponent.new(
        href: new_campaign_immunisation_import_path(@campaign),
        name: @campaign.name,
      ) %>
<% end %>

<% title = "Check and confirm" %>

<span class="nhsuk-caption-l"><%= @campaign.name %></span>
<%= h1 title, page_title: "#{@campaign.name} â€“ #{title}" %>

<% if @immunisation_import.exact_duplicate_record_count > 1 || @immunisation_import.not_administered_record_count > 1 %>
  <div class="nhsuk-warning-callout">
    <h3 class="nhsuk-warning-callout__label">
      <span class="nhsuk-u-visually-hidden">Important: </span>
      Uploaded records will differ from the file
    </h3>

    <ul class="nhsuk-list nhsuk-list--bullet">
      <% if @immunisation_import.exact_duplicate_record_count > 1 %>
        <li><%= @immunisation_import.exact_duplicate_record_count %> previously uploaded records were omitted</li>
      <% end %>

      <% if @immunisation_import.not_administered_record_count > 1 %>
        <li><%= @immunisation_import.not_administered_record_count %> records for children who were not vaccinated were omitted</li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= govuk_button_to "Upload records", campaign_immunisation_import_path(
      @campaign,
      @immunisation_import
    ), method: :put %>

<%= render AppVaccinationRecordTableComponent.new(@vaccination_records, new_records: true) %>
