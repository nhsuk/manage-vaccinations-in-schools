<%= render AppCardComponent.new(feature: true) do |card| %>
  <% card.with_heading(level: 3) { "Reasons for refusal" } %>

  <%= govuk_table do |table| %>
    <% table.with_head do |head| %>
      <% head.with_row do |row| %>
        <% row.with_cell(text: "Reason for refusal") %>
        <% row.with_cell(text: "Frequency") %>
      <% end %>
    <% end %>

    <% table.with_body do |body| %>
      <% reasons_for_refusal.each do |reason_for_refusal| %>
        <% body.with_row do |row| %>
          <% row.with_cell do %>
            <%= VaccinationRecord.human_enum_name(:reason_for_refusal, reason_for_refusal) %>
          <% end %>

          <% row.with_cell do %>
            <%= number_to_percentage(percentage_for(reason_for_refusal), precision: 1) %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
