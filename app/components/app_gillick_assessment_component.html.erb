<% if gillick_assessment || can_assess? %>
  <h5 class="nhsuk-heading-s">Gillick assessment</h5>

  <% if gillick_assessment %>
    <% if gillick_assessment.gillick_competent? %>
      <p class="app-status app-status--aqua-green">
        <svg class="nhsuk-icon nhsuk-icon--tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" focusable="false" aria-hidden="true">
          <path d="M11.4 18.8a2 2 0 0 1-2.7.1h-.1L4 14.1a1.5 1.5 0 0 1 2.1-2L10 16l8.1-8.1a1.5 1.5 0 1 1 2.2 2l-8.9 9Z"/>
        </svg>
        Child assessed as Gillick competent
      </p>
    <% else %>
      <p class="app-status app-status--red">
        <svg class="nhsuk-icon nhsuk-icon--cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" focusable="false" aria-hidden="true">
          <path d="M17 18.5c-.4 0-.8-.1-1.1-.4l-10-10c-.6-.6-.6-1.6 0-2.1.6-.6 1.5-.6 2.1 0l10 10c.6.6.6 1.5 0 2.1-.3.3-.6.4-1 .4z M7 18.5c-.4 0-.8-.1-1.1-.4-.6-.6-.6-1.5 0-2.1l10-10c.6-.6 1.5-.6 2.1 0 .6.6.6 1.5 0 2.1l-10 10c-.3.3-.6.4-1 .4z"/>
        </svg>
        Child assessed as not Gillick competent
      </p>
    <% end %>

    <% if (notes = gillick_assessment.notes).present? %>
      <p><%= notes %></p>
    <% end %>

    <% if policy(gillick_assessment).edit? %>
      <p>
        <%= govuk_button_link_to "Edit Gillick competence",
                                 edit_session_patient_programme_gillick_assessment_path(
                                   session,
                                   patient,
                                   programme,
                                 ),
                                 secondary: true,
                                 class: "nhsuk-u-margin-bottom-0" %>
      </p>
    <% end %>
  <% elsif can_assess? %>
    <p>
      <%= govuk_button_link_to "Assess Gillick competence",
                               edit_session_patient_programme_gillick_assessment_path(
                                 session,
                                 patient,
                                 programme,
                               ),
                               secondary: true,
                               class: "nhsuk-u-margin-bottom-0" %>
    </p>
  <% end %>
<% end %>
