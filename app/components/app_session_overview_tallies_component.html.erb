<div class="nhsuk-grid-column-full">
  <% programmes.each do |programme| %>
    <section>
      <h3 class="nhsuk-heading-m nhsuk-u-margin-bottom-2">
        <%= programme.name %>
      </h3>

      <p class="nhsuk-caption-m nhsuk-u-reading-width nhsuk-u-margin-bottom-4">
        <%= t(".eligibility_message", count: eligible_for_vaccination_count(programme)) %>
      </p>

      <% tally_cards = tally_cards_for_programme(programme) %>
      <% column_class = tally_cards.length == 4 ? "one-quarter" : "one-fifth" %>

      <ul class="nhsuk-grid-row nhsuk-card-group">
        <% tally_cards.each do |card_data| %>
          <li class="nhsuk-grid-column-<%= column_class %> nhsuk-card-group__item">
            <%= render AppCardComponent.new(compact: true,
                                            colour: card_data[:colour],
                                            link_to: card_data[:link_to]) do |card| %>
              <% card.with_heading(size: "xs") { card_data[:heading] } %>
              <% card.with_data { card_data[:count].to_s } %>
            <% end %>
          </li>
        <% end %>
      </ul>
    </section>
  <% end %>
</div>
